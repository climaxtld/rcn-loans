<ngx-spinner
  bdColor="rgba(0,0,0,.3)"
  size="medium"
  color="#fff"
  type="ball-clip-rotate-multiple"
></ngx-spinner>
<div class="container">
  <div class="margintop10 d-lg-none d-xs-block"></div>
  <div class="row">
    <div class="col-sm-12 col-lg-6 d-lg-block">
      <div class="head-title margintop30">BORROW A LOAN</div>
      <div class="head-subtitle marginbottom30">
        Create a loan according to your needs and send it to the network
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-8">
      <mat-accordion>
        <mat-expansion-panel
          [expanded]="init == true"
          [disabled]="true"
          class="expansion-panel"
        >
          <mat-expansion-panel-header class="expansion-panel__header">
            <mat-panel-title class="main-title">
              <span class="main-title main-title--order">1</span>
              <span class="main-title main-title--divider">| </span>
              SET YOUR LOAN REQUIREMENTS
            </mat-panel-title>
            <ng-container *ngIf="showProgress">
              <mat-progress-bar
                mode="determinate"
                [value]="creationProgress"
              ></mat-progress-bar>
              <div>
                <span class="fa fa-spinner fa-spin"></span>
              </div>
            </ng-container>
            <ng-container *ngIf="!showProgress && isCompleting">
              <div>
                <span class="fa fa-check" *ngIf="!init"></span>
              </div>
            </ng-container>
          </mat-expansion-panel-header>
          <form
            [formGroup]="formGroup1"
            (ngSubmit)="onSubmitStep1(fStep1)"
            #fStep1="ngForm"
          >
            <ng-template>Set yout loan requirements</ng-template>
            <div class="container-fluid paddingleft0 paddingright0">
              <div class="row" formGroupName="conversionGraphic">
                <div class="col-md-12 col-sm-11 margintop30">
                  <div class="row">
                    <div class="d-{md}-{none} margintop10"></div>
                    <div class="col-md-4 col-sm-12">
                      <div class="title">BORROW CURRENCY</div>
                      <div class="margintop10"></div>
                      <div class="currency">
                        <mat-form-field>
                          <mat-select
                            placeholder="Select a Token"
                            formControlName="requestedCurrency"
                            (selectionChange)="onCurrencyChange($event.value)"
                            required
                          >
                            <mat-option>
                              --
                            </mat-option>
                            <mat-option
                              *ngFor="let currency of currencies"
                              [value]="currency.symbol"
                            >
                              <div class="d-flex align-items-center py-1">
                                <app-currency-logo [address]="currency.address"></app-currency-logo>
                                <span class="ml-3">
                                  {{ currency.symbol }}
                                </span>
                              </div>
                            </mat-option>
                          </mat-select>
                        </mat-form-field>

                        <div
                          class="required"
                          *ngIf="requiredInvalid$"
                          [ngClass]="{
                            'required-invalid':
                              formGroup1.controls.conversionGraphic.controls
                                .requestedCurrency.invalid
                          }"
                        ></div>
                      </div>
                    </div>
                    <div class="d-{md}-{none} margintop40"></div>
                    <div class="col-md-4 col-sm-12">
                      <div class="title">BORROW AMOUNT</div>
                      <div>
                        <div>
                          <mat-form-field>
                            <input
                              matInput
                              type="number"
                              min="0"
                              max="1000000"
                              formControlName="requestValue"
                              (keyup)="onRequestedChange($event)"
                              pattern="^(0*[1-9][0-9]*(\.[0-9]+)?|0+\.[0-9]*[1-9][0-9]*)$"
                              required
                              class="block-title"
                              [ngClass]="
                                formGroup1?.value.conversionGraphic
                                  .requestValue === '0'
                                  ? ''
                                  : 'block-title--white'
                              "
                            />
                            <mat-hint>
                              <span
                                *ngIf="
                                  requestValue.valid ||
                                  (requestValue.pristine &&
                                    requestValue.untouched)
                                "
                                >Requested amount</span
                              >
                              <span
                                class="red"
                                *ngIf="
                                  requestValue.errors &&
                                  (requestValue.dirty || requestValue.touched)
                                "
                                >The minimum is 1</span
                              >
                            </mat-hint>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="margintop10"></div>
                  <div
                    *ngIf="
                      formGroup1?.value.conversionGraphic.requestedCurrency !=
                        undefined &&
                      formGroup1?.value.conversionGraphic.requestedCurrency !=
                        'RCN'
                    "
                    class="message-style"
                  >
                    <i class="fas fa-exclamation-triangle"></i> You’re borrowing
                    in
                    {{ formGroup1?.value.conversionGraphic.requestedCurrency }},
                    therefore the value of the pays is going to be converted to
                    RCN.
                  </div>
                  <div
                    *ngIf="selectedOracle"
                    class="title main-m3 margintop20 ellipsis"
                  >
                    Oracle: {{ selectedOracle }}
                  </div>
                </div>
              </div>
              <div class="margintop60"></div>
              <div class="row" formGroupName="duration">
                <div class="col col-sm-12">
                  <div class="title property marginbottom10">
                    Duration of the loan
                  </div>
                  <span class="subtitle-style"
                    >Set the number of days you want your loan to last.</span
                  >
                </div>
              </div>
              <div class="row" formGroupName="duration">
                <div class="col col-sm-12 col-md-3">
                  <mat-form-field>
                    <mat-select
                      placeholder="Select a number"
                      formControlName="fullDuration"
                      (selectionChange)="onDurationChange()"
                      required
                    >
                      <mat-option
                        *ngFor="let duration of durationDays"
                        [value]="duration"
                      >
                        {{ duration }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="margintop20"></div>
              <div class="row" formGroupName="interest">
                <div class="col col-lg-12">
                  <div class="title property margintop30 marginbottom10">
                    ANNUAL INTEREST RATE
                  </div>
                  <div class="subtitle-style">
                    Select the interest you want to pay
                  </div>
                  <div class="margintop40"></div>
                  <div class="row">
                    <div class="col-sm-12">
                      <mat-slider
                        class="percentage"
                        step="1"
                        [min]="selectedCurrency?.bestInterestRate.min"
                        [max]="selectedCurrency?.bestInterestRate.max"
                        tickInterval="1"
                        color="primary"
                        thumbLabel="true"
                        formControlName="annualInterest"
                        [disabled]="!formGroup1?.value.conversionGraphic.requestedCurrency"
                        (change)="onInterestRateChange()"
                      ></mat-slider>
                      <div class="slider-percentage-box">
                        <div
                          class="slider-percentaje subtitle-style subtitle-style--number"
                        >
                          {{ selectedCurrency?.bestInterestRate.min }}
                        </div>
                        <div
                          class="slider-percentaje subtitle-style subtitle-style--number"
                        >
                          {{ selectedCurrency?.bestInterestRate.max }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="margintop10"></div>
                  <div class="message-style message-style--italic">
                    <i class="fas fa-info-circle"></i> Higher interestes are
                    more likely to be lended.
                  </div>
                </div>
              </div>
              <div class="margintop20"></div>
              <div class="row">
                <div class="col col-lg-12">
                  <div class="title property margintop30 marginbottom10">
                    INSTALLMENTS
                    <mat-slide-toggle
                      formControlName="installmentsFlag"
                      [disabled]="
                        !installmentsAvailable || installmentsAvailable < 2
                      "
                      (change)="onInstallmentsChange()"
                      [(ngModel)]="isChecked"
                    >
                    </mat-slide-toggle>
                  </div>
                </div>
                <div class="col-sm-12 col-lg-6">
                  <span class="subtitle-style">
                    Do you want to pay back with installments?
                  </span>
                </div>
                <!-- <div class="col-sm-12 col-lg-6" *ngIf="installmentsFlag.value">
                  {{ installments }}
                </div> -->
              </div>
              <div class="margintop10"></div>
              <div [ngClass]="isChecked === true ? 'message-style' : 'hide'">
                <i class="fas fa-exclamation-triangle"></i> Payments are made
                every 15 days and the amount thereof is determined by the
                duration of the loan.
              </div>
              <div class="margintop20"></div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="title property margintop30 marginbottom10">
                    Expiration date
                  </div>
                  <div class="subtitle-style">
                    If nobody takes your debt, the loan will expire after
                    certain days of being generated.
                  </div>
                </div>
                <div class="col-sm-11 col-md-1">
                  <mat-form-field>
                    <input
                      matInput
                      type="number"
                      min="1"
                      max="30"
                      formControlName="expirationRequestDate"
                      pattern="^(?:[1-9]|[1-2][0-9]|30)$"
                      required
                    />
                    <mat-hint>
                      days
                    </mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="margintop40">
              <button
                mat-raised-button
                type="submit"
                class="button-reset create-button button-secondary-style"
              >
                {{ createButtonText }}
                <i class="fas fa-arrow-circle-right marginright50"></i>
              </button>
            </div>
          </form>
        </mat-expansion-panel>
        <mat-expansion-panel
          [disabled]="true"
          [expanded]="init != true"
          class="expansion-panel"
        >
          <mat-expansion-panel-header class="expansion-panel__header">
            <mat-panel-title class="main-title">
              <span class="main-title main-title--order">2</span>
              <span class="main-title main-title--divider">| </span>
              SELECT YOUR COLLATERAL
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form
            [formGroup]="formGroup2"
            (ngSubmit)="onSubmitStep2(fStep2)"
            #fStep2="ngForm"
          >
            <ng-template>Select your collateral</ng-template>
            <div class="container-fluid paddingleft0 paddingright0">
              <div class="row">
                <div class="col-md-4 col-sm-12">
                  <div class="title property margintop30 marginbottom10">
                    Collateral Asset
                  </div>
                  <mat-form-field>
                    <!-- <mat-select
                      placeholder="Select a Token"
                      formControlName="collateralAsset"
                      (selectionChange)="onCollateralAssetChange()"
                      required
                    >
                      <mat-option>
                        --
                      </mat-option>
                      <ng-container *ngFor="let currency of currencies">
                        <mat-option [value]="currency.symbol">
                          <div class="currency-box">
                            <div class="currency-img">
                              <img src="{{ currency.image }}" alt="" />
                            </div>
                            {{ currency.symbol }}
                          </div>
                        </mat-option>
                      </ng-container>
                    </mat-select> -->
                    <mat-select
                      placeholder="Select a Token"
                      formControlName="collateralAsset"
                      (selectionChange)="onCollateralAssetChange()"
                      required
                    >
                      <mat-option>
                        --
                      </mat-option>
                      <mat-option
                        *ngFor="let currency of collateralCurrencies"
                        [value]="currency.symbol"
                      >
                        <div class="d-flex align-items-center py-1">
                          <app-currency-logo [address]="currency.address"></app-currency-logo>
                          <span class="ml-3">
                            {{ currency.symbol }}
                          </span>
                        </div>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-4 col-sm-12">
                  <div class="title property margintop30 marginbottom10">
                    Collateral Amount
                  </div>
                  <mat-form-field>
                    <input
                      matInput
                      type="number"
                      min="0"
                      max="1000000"
                      formControlName="collateralAmount"
                      (input)="onCollateralAmountChange($event.target.value)"
                      pattern="^(0*[1-9][0-9]*(\.[0-9]+)?|0+\.[0-9]*[1-9][0-9]*)$"
                      required
                      class="block-title block-title--white"
                    />
                    <mat-hint>
                      <span
                        *ngIf="
                          requestValue.valid ||
                          (requestValue.pristine && requestValue.untouched)
                        "
                        >Requested amount</span
                      >
                      <span
                        class="red"
                        *ngIf="
                          requestValue.errors &&
                          (requestValue.dirty || requestValue.touched)
                        "
                        >The minimum is 1</span
                      >
                    </mat-hint>
                  </mat-form-field>
                </div>
              </div>

              <div class="margintop30"></div>
              <div class="row">
                <div class="col col-lg-12">
                  <div class="title property margintop30 marginbottom10">
                    LIQUIDATION RATIO
                  </div>
                </div>
                <div class="col-sm-12 col-lg-8">
                  <mat-radio-group
                    formControlName="liquidationRatio"
                    aria-label="Select an option"
                    (change)="onLiquidationRatioChange()"
                  >
                    <mat-radio-button color="primary" [value]="125">
                      125%
                    </mat-radio-button>
                    <mat-radio-button
                      color="primary"
                      [value]="150"
                      class="marginleft30"
                    >
                      150%
                    </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
              <div class="margintop20"></div>
              <div [ngClass]="radioSelected ? 'message-style italic' : 'hide'">
                <i class="fas fa-exclamation-triangle"></i> Lorem ipsum dolor
                sit amet, consectetur adipiscing elit.
              </div>
              <div class="margintop30"></div>
              <div class="row">
                <div class="col col-lg-12">
                  <div class="title property margintop30 marginbottom10">
                    BALANCE RATIO
                  </div>
                  <div class="subtitle-style">
                    Select the interest you want to pay
                  </div>
                  <div class="margintop40"></div>
                  <div class="row">
                    <div class="col-sm-12">
                      <mat-slider
                        formControlName="collateralAdjustment"
                        step="5"
                        tickInterval="1"
                        color="primary"
                        thumbLabel="true"
                        [min]="formGroup2.value.liquidationRatio"
                        max="400"
                        (change)="onCollateralRatioChange(); slideChange()"
                      ></mat-slider>
                      <div class="slider-percentage-box">
                        <div class="slider-percentaje subtitle-style subtitle-style--number">
                          {{ formGroup2.value.liquidationRatio }} %
                        </div>
                        <div class="slider-percentaje subtitle-style subtitle-style--number">
                          400%
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="margintop20"></div>
              <div [ngClass]="slideSelected ? 'message-style italic' : 'hide'">
                <i class="fas fa-exclamation-triangle"></i> Lorem ipsum dolor
                sit amet, consectetur adipiscing elit.
              </div>
            </div>
            <div class="margintop20"></div>
          </form>
        </mat-expansion-panel>
      </mat-accordion>
    </div>

    <div class="col-sm-12 col-md-4 card-desktop">
      <div class="card-container" id="card-container-desktop">
        <ng-container *ngIf="loan">
          <app-loan-avatar [loan]="loan" [short]="true"></app-loan-avatar>
          <div class="collateral-container">
            <span class="collateral-title">Collateral loan</span>
          </div>
        </ng-container>
        <div class="card-row">
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-calendar-alt card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Duration" }}</div>
              <div class="paragraph">{{ durationLabel }}</div>
            </div>
          </div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-calculator card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Annual Interest" }}</div>
              <div class="paragraph">~ {{ annualInterest.value }} %</div>
            </div>
          </div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-coins card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Installments" }}</div>
              <mat-expansion-panel
                class="installments-expansion-panel mat-elevation-z0"
                [hideToggle]="formGroup1.value.installmentsFlag ? false : true"
              >
                <mat-expansion-panel-header class="installments-header">
                  <mat-panel-title class="main-title-style ">
                    <div class="paragraph">
                      <span *ngIf="!formGroup1.value.installmentsFlag">-</span
                      ><span *ngIf="formGroup1.value.installmentsFlag"
                        >{{ installmentsAvailable }} pays</span
                      >
                    </div>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div
                  *ngFor="let pay of paysDetail"
                  class="row installments-detail-container no-gutters"
                >
                  <!-- <div class="col-4 installments-detail"> {{pay.pay}} </div> -->
                  <div
                    *ngIf="formGroup1.value.installmentsFlag"
                    class="col-2 installments-detail"
                  >
                    {{ pay.pay }}
                  </div>
                  <div
                    *ngIf="formGroup1.value.installmentsFlag"
                    class="col-4 installments-detail"
                  >
                    {{ pay.time }}
                  </div>
                  <div
                    *ngIf="formGroup1.value.installmentsFlag"
                    class="col-6 installments-detail"
                  >
                    {{ pay.amount }}
                  </div>
                </div>
              </mat-expansion-panel>
            </div>
          </div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-calendar-alt card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Expiration date" }}</div>
              <div class="paragraph">{{ durationLabel }}</div>
            </div>
          </div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-coins card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Collateral" }}</div>
              <div class="paragraph">
                {{ formGroup2.value.collateralAmount }}
                {{ formGroup2.value.collateralAsset?.currency || "-" }}
              </div>
            </div>
          </div>
          <mat-expansion-panel
            class="expansion-panel-see-more mat-elevation-z0"
            (opened)="panelOpenSeeMore = true"
            (closed)="panelOpenSeeMore = false"
          >
            <mat-expansion-panel-header class="expansion-panel-header-see-more">
              <div class="link-box">
                <span class="link" *ngIf="!panelOpenSeeMore">See more</span>
                <span class="link" *ngIf="panelOpenSeeMore">See less</span>
              </div>
            </mat-expansion-panel-header>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-chart-bar card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Liquidation ratio" }}</div>
                <div class="paragraph">
                  {{ formGroup2.value.liquidationRatio }}
                </div>
              </div>
            </div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-chart-area card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Balance ratio" }}</div>
                <div class="paragraph">
                  {{ formGroup2.value.collateralAdjustment }}
                </div>
              </div>
            </div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-clock card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Punitory" }}</div>
                <div class="paragraph">To do</div>
              </div>
            </div>
          </mat-expansion-panel>
          <div class="margintop20 divider"></div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-reply card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Borrow" }}</div>
              <div
                class="block-title"
                [ngClass]="
                  this.durationLabel === '0' ? '' : 'block-title--white'
                "
              >
                <span *ngIf="!formGroup1.value.conversionGraphic.requestValue"
                  >-</span
                ><span
                  *ngIf="formGroup1.value.conversionGraphic.requestValue"
                  >{{ formGroup1.value.conversionGraphic.requestValue }}</span
                >
              </div>
            </div>
          </div>
          <div class="card-property-container">
            <div class="card-icon-container">
              <i class="fas fa-share card-icon"></i>
            </div>
            <div class="card-property">
              <div class="title">{{ "Return" }}</div>
              <div
                class="block-title"
                [ngClass]="this.durationLabel === '0' ? '' : 'title-blue'"
              >
                <span *ngIf="!installmentsAvailable">-</span
                ><span *ngIf="installmentsAvailable">{{ returnValue }}</span>
              </div>
            </div>
          </div>
          <div class="margintop20"></div>
          <button
            mat-raised-button
            class="button-primary fullWidth margintop20"
            [ngClass]="
              formGroup1.valid && formGroup2.valid ? 'button-blue' : 'button'
            "
            [disabled]="!formGroup2.valid"
            (click)="onSubmitStep2(fStep2)"
            #confirmTooltip="matTooltip"
            matTooltip="You have completed all your loan info. Please check the card that everything you set is correct."
            matTooltipPosition="left"
            matTooltipClass="rcn-mat-tooltip rcn-mat-tooltip--arrow rcn-mat-tooltip--left"
          >
            {{ collateralButtonText }}
          </button>
          <div class="margintop20"></div>
          <div>
            <a class="link bold">
              Reset all values
            </a>
          </div>
        </div>
      </div>
    </div>

    <mat-expansion-panel
      (opened)="panelCardOpenState = true"
      (closed)="panelCardOpenState = false"
      [class.expansion-panel--opened]="panelCardOpenState"
      class="expansion-panel expansion-panel--card card-mobile"
    >
      <mat-expansion-panel-header class="expansion-panel-header--mobile">
        <mat-panel-title class="main-title-style ">
          <div class="main-title-container">
            <i class="fas fa-check-circle"></i>Loan info
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3 card-wrapper">
        <div class="card-container">
          <div class="card-row">
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-calendar-alt card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Duration" }}</div>
                <div class="paragraph">{{ durationLabel }}</div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-calculator card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Annual Interest" }}</div>
                <div class="paragraph">~ {{ annualInterest.value }} %</div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-coins card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Installments" }}</div>
                <mat-expansion-panel
                  class="installments-expansion-panel--mobile mat-elevation-z0"
                  [hideToggle]="
                    formGroup1.value.installmentsFlag ? false : true
                  "
                >
                  <mat-expansion-panel-header
                    class="installments-header--mobile"
                  >
                    <mat-panel-title class="main-title-style ">
                      <div class="paragraph">
                        <span *ngIf="!formGroup1.value.installmentsFlag">-</span
                        ><span *ngIf="formGroup1.value.installmentsFlag"
                          >{{ installmentsAvailable }} pays</span
                        >
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div
                    *ngFor="let pay of paysDetail"
                    class="row installments-detail-container no-gutters"
                  >
                    <!-- <div class="col-4 installments-detail"> {{pay.pay}} </div> -->
                    <div class="col-2 installments-detail">{{ pay.pay }}</div>
                    <div class="col-4 installments-detail">{{ pay.time }}</div>
                    <div class="col-6 installments-detail">
                      {{ pay.amount }}
                    </div>
                  </div>
                </mat-expansion-panel>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-calendar-alt card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Expiration date" }}</div>
                <div class="paragraph">{{ durationLabel }}</div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-coins card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Collateral" }}</div>
                <div class="paragraph">
                  {{ formGroup2.value.collateralAmount }}
                  {{ formGroup2.value.collateralAsset?.currency || "-" }}
                </div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-chart-bar card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Liquidation ratio" }}</div>
                <div class="paragraph">
                  {{ formGroup2.value.liquidationRatio }}
                </div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-chart-area card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Balance ratio" }}</div>
                <div class="paragraph">
                  {{ formGroup2.value.collateralAdjustment }}
                </div>
              </div>
            </div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-clock card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Punitory" }}</div>
                <div class="paragraph">To do</div>
              </div>
            </div>
            <div class="divider"></div>
            <div class="margintop20"></div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-reply card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Borrow" }}</div>
                <div class="margintop5"></div>
                <div
                class="block-title"
                  [ngClass]="
                    this.durationLabel === '0'
                      ? 'block-title'
                      : 'block-title-white && title-blue'
                  "
                >
                  <span *ngIf="!formGroup1.value.conversionGraphic.requestValue"
                    >-</span
                  ><span
                    *ngIf="formGroup1.value.conversionGraphic.requestValue"
                    >{{ formGroup1.value.conversionGraphic.requestValue }}</span
                  >
                </div>
              </div>
            </div>
            <div class="card-property-container">
              <div class="card-icon-container">
                <i class="fas fa-share card-icon"></i>
              </div>
              <div class="card-property">
                <div class="title">{{ "Return" }}</div>
                <div class="margintop5"></div>
                <div
                  [ngClass]="
                    this.durationLabel === '0'
                      ? 'block-title'
                      : 'block-title-white'
                  "
                >
                  <span *ngIf="!installmentsAvailable">-</span
                  ><span *ngIf="installmentsAvailable">{{ returnValue }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="margintop20"></div>
          <button
            mat-raised-button
            [ngClass]="
              formGroup1.valid && formGroup2.valid
                ? 'button-blue button-primary fullWidth margintop20'
                : ' button button-primary fullWidth margintop20'
            "
            [disabled]="!formGroup1.valid || !formGroup2.valid"
            (click)="onSubmitStep2(fStep2)"
          >
            {{ collateralButtonText }}
          </button>
          <div class="margintop20"></div>
          <!-- <div><a class="link" href="">Reset all values</a></div>
          </div>
          <div class="card-property">
            <div class="title">{{ "Borrow" }}</div>
            <div class="block-title">{{ durationLabel }}</div>
          </div>
        </div>
        <div class="card-property-container">
          <div class="card-icon-container">
            <i class="fas fa-share card-icon"></i>
          </div>
          <div class="card-property">
            <div class="title">{{ "Return" }}</div>
            <div class="block-title">{{ durationLabel }}</div>
          </div>
        </div>
        <div class="margintop20"></div>
        <button
          mat-raised-button
          class="button button-primary fullWidth margintop20"
          [disabled]="!formGroup1.valid || !formGroup2.valid"
          (click)="onSubmitStep2(fStep2)"
        >
          Confirm
        </button>
        <div class="margintop20"></div>
        <div><a class="link" href="">Reset all values</a></div>
      </div>
      <div class="margintop20"></div> -->
          <!-- </mat-expansion-panel> -->
        </div>
      </div>
    </mat-expansion-panel>
  </div>
</div>
